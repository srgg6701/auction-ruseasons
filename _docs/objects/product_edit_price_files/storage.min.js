function decode(a){var b,c,d,e,f,g,h,i="",j=0,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=k.indexOf(a.charAt(j++)),f=k.indexOf(a.charAt(j++)),g=k.indexOf(a.charAt(j++)),h=k.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));var l="";j=0;for(var m=0,n=0;j<i.length;)if(m=i.charCodeAt(j),128>m)l+=String.fromCharCode(m),j++;else if(m>191&&224>m)n=i.charCodeAt(j+1),l+=String.fromCharCode((31&m)<<6|63&n),j+=2;else{n=utftext.charCodeAt(j+1);var o=utftext.charCodeAt(j+2);l+=String.fromCharCode((15&m)<<12|(63&n)<<6|63&o),j+=3}return l}function listener(a){if(a.data&&"MBR_STORAGE"===a.data.type)switch(a.data.command){case"get":a.data.value=storage.get(a.data.key),window.parent.postMessage(a.data,"*");break;case"set":storage.set(a.data.key,a.data.value),window.parent.postMessage(a.data,"*");break;case"remove":storage.remove(a.data.key),window.parent.postMessage(a.data,"*");break;case"loadSettings":a.data.value=storage.loadSettings(),window.parent.postMessage(a.data,"*");break;case"saveSettings":storage.saveSettings(a.data.value);break;case"getSelector":a.data.value=storage.getSelector(a.data.domain),window.parent.postMessage(a.data,"*");break;case"testStorage":a.data.value=storage.testStorage(),window.parent.postMessage(a.data,"*")}}!function(){var a={set:function(a,b,c,d,e){var f=a+"="+window.escape(b)+";";c&&(c instanceof Date?window.isNaN(c.getTime())&&(c=new Date):c=new Date((new window.Date).getTime()+1e3*window.parseInt(c,10)*60*60*24),f+="expires="+c.toGMTString()+";"),d&&(f+="path="+d+";"),e&&(f+="domain="+e+";"),window.document.cookie=f},get:function(a){var b=new window.RegExp("(?:^"+a+"|;\\s*"+a+")=(.*?)(?:;|$)","g"),c=b.exec(window.document.cookie);return null===c?null:c[1]},remove:function(a){this.set(a,"",new Date(1970,1,1,1,1),"/")}};"object"==typeof mbr?mbr.cookie=a:window.cookie=a}(),function(){function a(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=!1}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a}function b(){var a=(new Date).getTime()+36e5;cookie.set("script-data-updated","true",new Date(a),"/")}function c(){return!!cookie.get("script-data-updated1")}function d(){var c=a();c.open("GET","/static/script-data/script-data.json",!0),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var a=JSON.parse(c.responseText);a&&(localStorage.setItem("blacklist",decode(JSON.stringify(a.blacklist))),localStorage.setItem("selectors",JSON.stringify(a.selectors)),b())}},c.send(null)}c()||d()}();var storage={get:function(a){var b=null;try{var c=localStorage.getItem(a);c&&(b=JSON.parse(c))}catch(d){}return b},set:function(a,b){try{var c=JSON.stringify(b);localStorage.setItem(a,c)}catch(d){}return b},remove:function(a){try{localStorage.removeItem(a)}catch(b){}},_saveSettingsParam:function(a,b){var c=new Date((new Date).getTime()+12096e5);cookie.set(a,b,c,"/")},_getSettingsParam:function(a){var b=cookie.get(a);return b?(b=unescape(b),"true"!==b&&"false"!==b?b:"true"===b):(b=localStorage.getItem(a))?JSON.parse(b):null},saveSettings:function(a){if(a)for(var b in a)this._saveSettingsParam(b,a[b])},loadSettings:function(){for(var a={},b=["affId","trackingId","applicationName","campaignName","offerEnabled","affSource","affSub","source","aviaEnabled","autoShowShopList"],c=0;c<b.length;c++)a[b[c]]=this._getSettingsParam(b[c]),null!==a[b[c]]&&void 0!==a[b[c]]&&this._saveSettingsParam(b[c],a[b[c]]);return a},getSelector:function(a){var b=localStorage.getItem("selectors");if(b&&(b=JSON.parse(decode(b)))){if(b[a])return b[a];if(a=a.substr(a.indexOf(".")+1),b[a])return b[a]}return null},testStorage:function(){var a=!1;try{localStorage.getItem("test"),cookie.get("test"),a=!0}catch(b){}return a}};window.addEventListener?window.addEventListener("message",listener,!0):window.attachEvent("onmessage",listener);